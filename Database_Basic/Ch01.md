# Ch01. 데이터베이스


### 1. DB & DBMS & DB System
- DB(Database)
    - 전자적으로 저장되고 사용되는 관련있는 데이터들의 조직화된 집합

- DBMS (Database Management Systems)
    - 사용자에게 DB를 정의하고 만들고 관리하는 기능을 제공하는 소프트웨어 시스템
    - ex. PostgreSQL, MySQL, Oracle, MSSQL
    - DB를 정의하다 보면 부가적인 데이터가 발생(metadata)

- metadata
    - DB를 정의하거나 기술하는 데이터
    - catalog라고도 부름
    - ex. 데이터 유형, 구조, 제약 조건, 보안, 저장, 인덱스, 사용자 그룹 등등
    - metadata 또한 DBMS를 통해 저장/관리됨

- database system
    - DB + DBMS + 연관된 applications
    - 줄여서 DB라고도 부름

- 전체적인 그림
    > <img width="513" height="506" alt="image" src="https://github.com/user-attachments/assets/16646e57-8796-4fc5-ac46-c8ca0b3c3fb9" />
    - 사용자가 쿼리를 요청하면 
    - DBMS에서 쿼리와 관련된 작업을 처리하고
    - Meta-Data를 확인한 후 
    - 실제 저장된 데이터베이스에서 데이터를 가져와서 
    - 사용자의 쿼리 요청에 응답함


### 2. Data Models(Modeling)
- DB의 구조를 기술하는데 사용될 수 있는 개념들이 모인 집합
    - DB 구조: 데이터 유형, 데이터 관계, 제약 사항 등등
- DB의 구조를 **추상화**해서 표현할 수 있는 수단을 제공
- Data Model은 여러 종류가 있으며 추상화 수준과 DB 구조화 방식이 조금씩 다름
- DB에서 읽고 쓰기 위한 기본적인 동작들도 포함됨


### 3. Data Model 분류
- conceptual (or high-level) data models
- logical (or representational) data models
- physical (or low-level) data models


### 4. conceptual data models
- 일반 사용자들(비개발자)이 쉽게 이해할 수 있는 개념들로 이뤄진 모델
- 추상화 수준이 가장 높음
- 비즈니스 요구 사항을 추상화하여 기술할 때 사용
- ex. Entity-Relationship Model(ER Diagram)
    > <img width="765" height="221" alt="image" src="https://github.com/user-attachments/assets/5b96bb8c-2993-42a7-b5ca-93717de7fbd4" />
    - Entity: Student / Book
    - Relationship: reads
    - Attributes:
        - Stduent: stu_id, major, name, grade
        - Book: book_id, Author, name, price


### 5. logical data models
- 이해하기 어렵지 않으면서도 디테일하게 DB를 구조화 할 수 있는 개념들을 제공
- **데이터가 컴퓨터에 저장될 때의 구조와 크게 다르지 않게 DB 구조화를 가능하게 함**
- **특정 DBMS나 storage에 종속되지 않는 수준**에서 DB를 구조화할 수 있는 모델
    - 구현하려는 DBMS의 종류에는 종속적
    - 관계형 모델로 설계를 했다면 이는 관계형 DBMS를 사용하겠다는 의도가 포함
    - 다만 여기서 Oracle, MySQL을 쓸 것인가와 같은 하드웨어/소프트웨어 제품 선정에는 독립적이다는 의
- ex. Relational Data Model (ORACLE / MSSQL / MySQL)
    > <img width="402" height="212" alt="image" src="https://github.com/user-attachments/assets/c81e12c1-4d67-4fa2-bea9-c51cdb06573e" />
    - Relational: 사실상 테이블을 의미
    - Row: 데이터들을 의미
    - Column: 데이터들의 속성

- ex. Object Data Model
- ex. Object-Relational Data Model (PostgreSQL)


### 6. physical data models
- **실제 컴퓨터에 데이터가 어떻게 파일 형태로 저장되는지**를 기술할 수 있는 수단을 제공
- data format, data orderings, access path 등등
- access path: 데이터 검색을 빠르게 하기 위한 구조체 (ex. index)


### 7. Schema & State
- Database Schema
    - data model을 바탕으로 database의 구조를 기술한 것
    - schema는 database를 설계할 때 정해지며 한 번 정해진 후에는 자주 바뀌지 않음
    > <img width="766" height="103" alt="image" src="https://github.com/user-attachments/assets/edf412f0-5666-47b5-94b9-ca08dfd5e5c4" />
    - 데이터를 나타내는 Student / Book
    - 각 데이터가 가지는 속성을 정의

- Database State
    - DB에 있는 실제 데이터는 꽤 자주 바뀔 수 있음
    - 특정 시점에 DB에 있는 데이터를 Database State 혹은 Snapshot이라고 함
    - 혹은 DB에 있는 현재 Instances의 집합이라고도 함


### 8. Three-Schema Architecture
- Database System을 구축하는 Architecture 중의 하나
- **user application으로부터 물리적인 DB를 분리시키는 목적**
    - 즉, 물리적인 DB가 변경되어도 user application에 주는 영향을 최소화
- 세 가지 level이 존재하며 각각의 level마다 schema가 정의되어 있음
- 종류:
    - external schemas (or user views) at external (or view) level
    - conceptual schemas at conceptual level
    - internal schemas at internal
    > <img width="523" height="487" alt="image" src="https://github.com/user-attachments/assets/02dba8aa-e455-415b-80d8-c6c45c7187c7" />

    

### 9. internal schema
- 물리적으로 데이터가 어떻게 저장되는지 physical data model을 통해 표현
- data storage, data structure, access path 등등 실체가 있는 내용 기술



### 10. external schema
- external views, user views라고도 불림
- 특정 유저들이 필요로 하는 데이터만 표현
- 그 외 알려줄 필요가 없는 데이터는 숨김
- logical data model을 통해 

- 초기에는 internal / external로 구성
    - 문제 발생: user들이 원하는 데이터들이 달라지다보니 internal에서 중복되는 데이터가 많아지기 시작함
    - conceptual schema 등장


### 11. conceptual schema
- 전체 DB에 대한 구조를 기술
- 물리적인 저장 구조에 관한 내용은 숨김
- entities, data types, relationship, user operations, constraints에 집중
- logical data model을 통해 기술


### 12. Three-Schema Architecture 정리
- 각 레벨을 독립시켜서 어느 레벨에서의 변화가 상위 레벨에 영향을 주지 않기 위함
- 대부분의 DBMS가 three level을 완벽하게 혹은 명시적으로 나누지는 않음
- 데이터가 존재하는 곳은 internal level


### 13. Database Language
- Data Definition Language (DDL)
    - conceptual schema를 정의하기 위해 사용되는 언어
    - internal schema까지 정의할 수 있는 경우도 있음

- Storage Definition Language (SDL)
    - internal schema를 정의하는 용도로 사용되는 언어
    - 요즘은 특히 relational DBMS에서는 SDL이 거의 없고 파라미터 등의 설정으로 대체됨

- View Definition Language (VDL)
    - external schemas를 정의하기 위해 사용되는 언어
    - 대부분의 DBMS에서는 DDL이 VDL 역할까지 수행

- Data Manipulation Language (DML)
    - DB에 있는 data를 활용하기 위한 언어
    - data 추가, 삭제, 수정, 검색 등등의 기능을 제공하는 언어

- 통합된 언어 (DML / VDL / DDL)
    - Relational Database Language: **SQL**
 
### 14. 추가 내용
- 논리적인 데이터 독립성 (Logical Data Independence)
  - conceptual schema가 변경되어도 external schema에 영향을 주지 않는 능력(테이블에 새로운 컬럼을 추가해도 기존 앱의 쿼리는 그대로 동작)

- 물리적인 데이터 독립성 (Physical Data Independence)
  - 내부 스키마가 변경되어도 개념/외부 스키마에 영향을 주지 않는 능력(성능 향상을 위해 인덱스를 추가하거나 파일 저장 방식을 바꿔도 테이블 구조나 앱 쿼리는 변하지 않음)
 
- SDL과 VDL
  - 실제로 사용자가 SDL이라는 언어를 사용하진 않고, CREATE INDEX, TABLESPACE 설정 같은 SQL의 확장된 구문을 통해 물리적 설정을 조절함
  - VDL도 주로 VIEW를 생성하거나 API 서버에서 반환할 데이터 필드를 조정함으로써 외부 스키마 역할을 수행

- 현대의 애자일 개발 환경에서는 서비스 업데이트에 따라 스키마가 매우 빈번하게 변경됨 / Schema Migration 도구를 필수적으로 사용

- 현대에는 물리적 저장 구조는 클라우드 같은 플랫폼이 자동으로 최적화해주는 경우도 있음
